{{template "header.html" .}}

{{template "sidebar.html" .}}

  <!-- content start -->
  <div class="admin-content">
    <div class="admin-content-body">
      <div class="am-cf am-padding am-padding-bottom-0">
        <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">账号列表</strong> / <small>Table</small></div>
      </div>

      <hr>
<form action="/users/search" id="mainForm" method="POST" class="am-form">
    <!-- panel start -->
    <div class="am-panel am-panel-default">
      <div class="am-panel-hd am-cf" data-am-collapse="{target: '#collapse-panel-search'}">搜索<span class="am-icon-chevron-down am-fr" ></span></div>
      <div class="am-panel-bd am-collapse am-in" id="collapse-panel-search">

          <div class="am-g am-margin-vertical-sm">

              <div class="am-u-sm-12 am-u-md-3">
                  <input type="text" name="username" value="{{ .username }}" class="am-form-field am-input-sm" placeholder="登陆名" />
              </div>

              <div class="am-u-sm-12 am-u-md-3">
                  <input type="text" name="name" value="{{ .name }}" class="am-form-field am-input-sm" placeholder="真实姓名" />
              </div>

              <div class="am-form-icon am-u-sm-12 am-u-md-3">
                  <div class="am-form-icon">
                      <i id="date-start-icon" class="am-icon-calendar"></i>
                      <input id="date-start" type="text" name="last_visit_begin" value="{{ .last_visit_begin }}" class="am-form-field am-input-sm" placeholder="最后登录时间-从" />
                  </div>
              </div>

              <div class="am-form-icon am-u-sm-12 am-u-md-3">
                  <div class="am-form-icon">
                      <i id="date-end-icon" class="am-icon-calendar"></i>
                      <input id="date-end" type="text" name="last_visit_end" value="{{ .last_visit_end }}" class="am-form-field am-input-sm" placeholder="最后登录时间-到" />
                  </div>
              </div>

          </div>
          <div class="am-g am-margin-vertical-sm">

              <div class="am-u-sm-12 am-u-md-3">
                   {{template "select.html" .}}
              </div>
              <div class="am-u-sm-12 am-u-md-3 am-u-end">
                  <button class="am-btn am-btn-default am-input-sm" type="submit">搜索</button>
              </div>

          </div>

      </div>
    </div>
    <!-- panel end -->

  <table class="am-table am-table-striped am-text-sm am-table-hover">
    <thead>
      <tr>
          <td class="am-text-nowrap">登录名</td>
          <td class="am-text-nowrap">状态</td>
          <td class="am-text-nowrap">真实姓名</td>
          <td class="am-text-nowrap">用户组</td>
          <td class="am-text-nowrap">下属成员</td>
          <td class="am-text-nowrap">登录IP限制</td>
          <td class="am-text-nowrap">登录次数</td>
          <td class="am-text-nowrap">最后登录IP</td>
          <td class="am-text-nowrap">最后登录地点</td>
          <td class="am-text-nowrap">最后登录时间</td>
          <td class="am-text-nowrap table-set">操作</td>
      </tr>
  </thead>
  <tbody>
  {{ range $v := .list }}
           <tr>
                    <td>{{ $v.Username    }}</td>
                    <td>{{ $v.Status      }}</td>
                    <td>{{ $v.Name        }}</td>
					<td>{{ $v.Group_id    }}</td>
                    <td>{{ $v.Members     }}</td>
                    <td>{{ $v.Ip_limit    }}</td>
                    <td>{{ $v.Login_times }}</td>
                    <td>{{ $v.Last_ip     }}</td>
                    <td>{{ $v.Last_addr   }}</td>
                    <td>{{ $v.Last_visit  }}</td>
                    <td><a href="/users/list?edit={{$v.Id}}">详细</a> <a href="javascript:if(confirm(\'你确定要删除此项吗？\'))location.replace(\'/users/list?delete={{$v.Id}}'\');">删除</a></td>
           </tr>
           {{ end }}
  </tbody>
</table>

{{template "pager.html" .}}

          <hr />
          </form>
        </div>

      </div>
    </div>

  </div>

<script>
$(function() {
    var startDate = new Date(2000, 1, 1);
    var endDate = new Date(2099, 11, 25);
    var $alert = $('#my-alert');

    $('#date-start-icon').datepicker().
        on('changeDate.datepicker.amui', function(event) {
                if (event.date.valueOf() > endDate.valueOf()) {
                $alert.find('p').text('开始日期应小于结束日期！').end().show();
                } else {
                $alert.hide();
                startDate = new Date(event.date);
                $('#date-start').val($('#date-start-icon').data('date') + ' 00:00:00');
                }
                $(this).datepicker('close');
                });

    $('#date-end-icon').datepicker().
        on('changeDate.datepicker.amui', function(event) {
                if (event.date.valueOf() < startDate.valueOf()) {
                $alert.find('p').text('结束日期应大于开始日期！').end().show();
                } else {
                $alert.hide();
                endDate = new Date(event.date);
                $('#date-end').val($('#date-end-icon').data('date') + ' 23:59:59');
                }
                $(this).datepicker('close');
                });


});
</script>
  <!-- content end -->

{{template "footer.html" .}}
